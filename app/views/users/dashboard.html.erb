<h1 class="text-center">Dashboard</h1>

<div class="d-flex">


<% if current_user.rocks.exists? %>
<div class="container border">

  <div id="myrocks">
    <h2>Mes cailloux</h2>
    <ul>
      <% @rocks.each do |rock| %>
        <li>
          <%= link_to rock.name, rock_path(rock) %> : <%= rock.price %>€
        </li>
      <% end %>
    </ul>
  </div>

    <% if @rents.exists? %>
      <div id="myrents">
          <h2>Demandes de location</h2>
          <ul>
            <% @rents.each do |rent| %>
              <li>
                <%= link_to rent.date, request_path(rent) %> : <%= rent.rock.name %> demandée par <%= rent.user.first_name %>, du <%= rent.date %> au <%= rent.end_date %> <span class="badge bg-secondary"><%= rent.status %></span>
              </li>
            <% end %>
          </ul>
        </div>
    <%end%>
</div>
<%end%>

<div class="container border">

  <div id="myrequests">
    <h2>Mes locations en cours et à venir</h2>
    <% unless @requests.empty? %>
      <ul>
        <% @requests.each do |request| %>
          <li>
            <%= link_to request.date, request_path(request) %> : <%= request.rock.name %> appartenant à <%= request.rock.user.first_name %> <span class="badge bg-secondary"><%= request.status %></span>
          </li>
          <% end %>
      </ul>
    <% else %>
      <p> Vous n'avez réservé aucun caillou :(</p>
      <%=link_to "Trouvez le caillou de vos rêves", rocks_path, class: "btn btn-primary mb-2" %>
    <% end %>
    <h3>Mes locations passées/refusées</h3>
    <ul>
        <% @pastrequests.each do |request| %>
          <li>
            <%= link_to request.date, request_path(request) %> : <%= request.rock.name %> appartenant à <%= request.rock.user.first_name %> <span class="badge bg-secondary"><%= request.status %></span>
          </li>
        <% end %>
    </ul>

  </div>

</div>

</div>
